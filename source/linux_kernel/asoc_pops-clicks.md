---
title: 音频弹出和点击
date: 2023-04-29 20:43:29
categories: Linux 内核
tags:
- Linux 内核
---

弹出和点击是由音频子系统中的组件上电和下电引起的不需要的音频工件。这在 PC 上很明显，当一个音频模块被加载或卸载时 (在模块加载时，声卡上电，导致扬声器发出砰砰声)。

在具有 DAPM 的便携式设备上，弹出和点击可能更频繁。因为子系统中的组件是根据音频使用情况动态供电的，这随后会导致每次组件电源状态改变时都会出现一个小的弹出和点击。

## 最小化播放弹出和点击

目前还无法完全消除便携式音频子系统中的播放弹出，但未来的音频 codec 硬件将更好地抑制弹出和点击。可以通过以特定顺序给音频组件上电来减少播放时的弹出。启动和关闭的顺序有所不同，并遵循一些基本规则：

 启动顺序：DAC --> Mixers --> Output PGA --> Digital Unmute

 关闭顺序：Digital Mute --> Output PGA --> Mixers --> DAC

这假设，从 DAC 的 codec PCM 输出路径是通过混音器，然后是 PGA (programmable gain amplifier，可编程增益放大器) ，然后输出到扬声器。

## 最小化采集弹出和点击

捕获的工件在某种程度上更容易摆脱，因为我们可以延迟激活 ADC，直到所有的 pop 发生。这遵循与播放类似的电源规则，其组件上电下电的顺序取决于流的启动或关闭。

 启动顺序 - Input PGA --> Mixers --> ADC

 关闭顺序 - ADC --> Mixers --> Input PGA

## 拉链噪音

当音量控制在其最大增益值附近改变时，音频播放或采集流中可能发生不想要的拉链噪音。当增益增加或减少改变音频信号幅度的平均值过快时，会听到拉链噪声。可以通过启用每个音量控制的零交叉设置最小化它。当信号越过零振幅线时，ZC 迫使增益发生变化。

[原文](linux-kernel/Documentation/sound/soc/pops-clicks.rst)

Done.
